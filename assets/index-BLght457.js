var r=Object.defineProperty;var c=(l,e,s)=>e in l?r(l,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[e]=s;var t=(l,e,s)=>c(l,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();class p{constructor(){t(this,"isReportsDataLoaded");t(this,"isMediaplansDataLoaded");t(this,"chatMessages");t(this,"mediaplansList");t(this,"isMediaplansListOpened");t(this,"isReportsListOpened");t(this,"reportsList");t(this,"loadTimer");this.isReportsDataLoaded=!1,this.isMediaplansDataLoaded=!1,this.mediaplansList=[],this.isMediaplansListOpened=!0,this.isReportsListOpened=!0,this.reportsList=[],this.chatMessages=[],this.loadTimer=2e3}setMediaplansListOpened(e){this.isMediaplansListOpened=e}setReportsListOpened(e){this.isReportsListOpened=e}setIsReportsDataLoaded(e){this.isReportsDataLoaded=e}addDataToReportsList(e){this.reportsList.push(e)}setIsMediaplansDataLoaded(e){this.isMediaplansDataLoaded=e}addDataToMediaplansList(e){this.mediaplansList.push(e)}addMsgData(e){this.chatMessages.push(e)}}function o(){const l=new Date,e=l.getHours().toString().padStart(2,"0"),s=l.getMinutes().toString().padStart(2,"0");return`${e}:${s}`}class h{constructor(){t(this,"appHeader");t(this,"mediaplansAndReportsBtnGrp");t(this,"assistantOptionsBtn");t(this,"assistantOptionsMenu");t(this,"allFilesContainer");t(this,"allFilesCap");t(this,"toggleMediaplansListBtn");t(this,"toggleReportsListBtn");t(this,"chatCap");t(this,"chatMessages");t(this,"chatWindow");t(this,"chatTextArea");t(this,"sendMsgBtn");t(this,"allFilesWrapper");t(this,"mediaplansList");t(this,"getMediaplansBtn");t(this,"reportsList");t(this,"getReportsBtn");this.appHeader=document.querySelector(".app-page__header "),this.mediaplansAndReportsBtnGrp=document.querySelector(".app-header__info-btn-grp"),this.assistantOptionsBtn=document.querySelector(".assistant-title__badge"),this.assistantOptionsMenu=document.querySelector(".assistant-title__options"),this.allFilesContainer=document.querySelector(".app-main__all-files"),this.allFilesCap=document.querySelector(".all-files__cap"),this.toggleMediaplansListBtn=document.querySelector(".media-plans-box__title"),this.toggleReportsListBtn=document.querySelector(".reports-box__title"),this.chatCap=document.querySelector(".app-chat__descrip-and-actions"),this.chatMessages=document.querySelector(".app-chat__messages"),this.chatWindow=document.querySelector(".app-chat__body"),this.chatTextArea=document.querySelector(".chat-body__text-area"),this.sendMsgBtn=document.querySelector(".chat-actions__send-msg"),this.allFilesWrapper=document.querySelector(".all-files__plans-and-reports-wrapper"),this.mediaplansList=document.querySelector(".media-plans-box__list"),this.getMediaplansBtn=document.querySelector(".get-media-plans-btn"),this.reportsList=document.querySelector(".reports-box__list"),this.getReportsBtn=document.querySelector(".get-reports-btn")}handleStickyNavMenuOnScroll(){const e=window.innerWidth<1440;!this.appHeader||!this.mediaplansAndReportsBtnGrp||(e&&window.scrollY>0?(this.appHeader.classList.add("sticky-nav-menu"),this.mediaplansAndReportsBtnGrp.classList.add("hidden-elem")):(this.appHeader.classList.remove("sticky-nav-menu"),this.mediaplansAndReportsBtnGrp.classList.remove("hidden-elem")))}toggleElemVisibility(e,s){s?(e.classList.remove("hidden-elem"),e.classList.add("active-elem")):(e.classList.remove("active-elem"),e.classList.add("hidden-elem"))}toggleMediaplansListVisibility(e,s){this.toggleMediaplansListBtn&&(this.toggleMediaplansListBtn.innerHTML=`
            <h3 class="media-plans-box__title__text">Медиапланы</h3>
            ${e?'<i class="fa-solid fa-chevron-down"></i>':'<i class="fa-solid fa-chevron-up"></i>'}
        `),s.classList.toggle("hidden-elem")}toggleReportsListVisibility(e,s){this.toggleReportsListBtn&&(this.toggleReportsListBtn.innerHTML=`
              <h3 class="reports-box__title__text">Отчеты</h3>
              ${e?'<i class="fa-solid fa-chevron-down"></i>':'<i class="fa-solid fa-chevron-up"></i>'}
          `),s.classList.toggle("hidden-elem")}renderAllFilesContainer(e){var i;e.target.classList.contains("info-btn-grp__btn")&&((i=this.allFilesContainer)==null||i.classList.toggle("active-elem"))}renderAssistantOptionsMenu(){var e;(e=this.assistantOptionsMenu)==null||e.classList.toggle("active-elem")}renderChatBorderOnFocus(){var e;(e=this.chatWindow)==null||e.classList.toggle("chat-active")}createMediaplansOrReportsCap(e,s,i){e&&(s.classList.add("empty-files-data"),s.innerHTML=`
          <i class="fa-regular fa-folder-closed"></i>
          <p class="empty-files-data-text">${i}</p>
        `)}createMediaPlansListElem(e,s,i){const a=document.createElement("li");return a.classList.add("media-plans-list__elem"),a.innerHTML=`
      <div class="media-plans-list__elem__company media-plans-company">
        <i class="fa-regular fa-folder-closed"></i>
        <p class="media-plans-company__name">${e}</p>
        <div class="media-plans-company__download">
          ${i?"Загрузка идет...":'<i class="fa-solid fa-download"></i>'}
        </div>
      </div>
    
      ${s?`
        <div class="media-plans-list__elem__rdy media-plan-elem-rdy">
            <i class="fa-solid fa-check"></i>
            <p class="media-plan-elem-rdy__text">Медиаплан от 18.04.2025 готов</p>
        </div>`:""}
    `,a}createReportsListElem(e,s,i){const a=document.createElement("li");return a.classList.add("reports-list__elem"),a.innerHTML=`
      <div class="reports-list__elem__company reports-company">
        <i class="fa-regular fa-folder-closed"></i>
        <p class="reports-company__name">${e}</p>

        ${i?`<div class="reports-company__download">
          <i class="fa-solid fa-download"></i>
        </div>`:`<div class="reports-company__download download-process">
          <i class="fa-solid fa-arrow-rotate-left"></i>
        </div>`}
      </div>
    
      ${s?`
        <div class="media-plans-list__elem__rdy media-plan-elem-rdy">
            <i class="fa-solid fa-check"></i>
            <p class="media-plan-elem-rdy__text">Отчет от 18.04.2025 готов</p>
        </div>`:""}
    `,a}createAssistantChatMessage(e){const s=document.createElement("div");return s.classList.add("app-chat__messages__message","assitant-msg"),s.innerHTML=`
      <div class="assitant-msg__body">
        <div class="assitant-msg__body__photo">
          <i class="fa-regular fa-user"></i>
        </div>
        <div class="assitant-msg__body__text">
          <span>${e}</span>
        </div>
      </div>
      <div class="assitant-msg__info">
        <span class="assitant-msg__from">Jim</span>
        <span class="assitant-msg__info__time">${o()}</span>
      </div>
  `,s}createUserChatMsg(e){const s=document.createElement("div");return s.classList.add("app-chat__messages__message","my-msg"),s.innerHTML=`
      <div class="my-msg__body">
        <div class="my-msg__body__text">
          <span>${e}</span>
        </div>
      </div>
      <div class="my-msg__info">
        <span class="my-msg__info__time">${o()}</span>
      </div>
    `,s}addAssistantMsgToChat(e){this.chatCap&&this.toggleElemVisibility(this.chatCap,!1);const s=this.createAssistantChatMessage(e);this.chatMessages&&(this.toggleElemVisibility(this.chatMessages,!0),this.chatMessages.append(s))}addUserMsgToChat(e){this.chatCap&&this.toggleElemVisibility(this.chatCap,!1);const s=this.createUserChatMsg(e);this.chatMessages&&(this.toggleElemVisibility(this.chatMessages,!0),this.chatMessages.append(s))}}const m=[{title:"companyName 11/23",isLoaded:!1,isLoading:!1},{title:"companyName 10/23",isLoaded:!1,isLoading:!1},{title:"companyName 9/23",isLoaded:!1,isLoading:!1},{title:"companyName 8/23",isLoaded:!1,isLoading:!1}],g=[{title:"companyName 11/23",isLoaded:!1,isLoading:!1},{title:"companyName 10/23",isLoaded:!1,isLoading:!1},{title:"companyName 9/23",isLoaded:!1,isLoading:!1}];class L{constructor(e,s){t(this,"model");t(this,"view");this.model=e,this.view=s,this.view.mediaplansAndReportsBtnGrp.addEventListener("click",i=>{this.view.renderAllFilesContainer(i)}),this.view.toggleMediaplansListBtn.addEventListener("click",()=>{this.handleMediaplansListToggle(),console.log(this.model)}),this.view.toggleReportsListBtn.addEventListener("click",()=>{this.handleReportsListToggle(),console.log(this.model)}),this.view.assistantOptionsBtn.addEventListener("click",()=>{this.view.renderAssistantOptionsMenu()}),this.view.chatTextArea.addEventListener("focus",()=>{this.view.renderChatBorderOnFocus()}),this.view.chatTextArea.addEventListener("blur",()=>{this.view.renderChatBorderOnFocus()}),this.view.getMediaplansBtn.addEventListener("click",()=>{this.handleMediaplansListRender()}),this.view.getReportsBtn.addEventListener("click",()=>{this.handleReportsListRender()}),this.view.sendMsgBtn.addEventListener("click",()=>{this.handleSendUserMsg()}),document.addEventListener("keydown",i=>{i.key==="Enter"&&this.handleSendUserMsg()}),document.addEventListener("scroll",()=>{this.view.handleStickyNavMenuOnScroll()}),document.addEventListener("click",()=>{})}handleSendUserMsg(){const e=this.view.chatTextArea.value.trim();e.length>0?(this.model.addMsgData(e),this.view.addUserMsgToChat(e),this.view.chatTextArea.value="",console.log(this.model)):(alert("Пожалуйста введите Ваше сообщение!"),this.view.chatTextArea.value="")}handleMediaplansListToggle(){this.view.toggleMediaplansListVisibility(this.model.isMediaplansListOpened,this.view.mediaplansList),this.model.setMediaplansListOpened(!this.model.isMediaplansListOpened)}handleReportsListToggle(){this.view.toggleReportsListVisibility(this.model.isReportsListOpened,this.view.reportsList),this.model.setReportsListOpened(!this.model.isReportsListOpened)}fileListRenderPrep(e){this.view.toggleElemVisibility(this.view.allFilesWrapper,!0),this.view.toggleElemVisibility(this.view.allFilesCap,!1),e.classList.remove("empty-files-data"),e.innerHTML=""}async handleMediaplansListRender(){if(this.model.isMediaplansDataLoaded){alert("Данные по медиапланам уже были загружены!");return}this.view.getMediaplansBtn.disabled=!0,this.view.addAssistantMsgToChat("Выполняется Ваш запрос данных по медиапланам"),this.model.addMsgData("Выполняется Ваш запрос данных по медиапланам");try{await new Promise(e=>{setTimeout(()=>{this.view.getMediaplansBtn.disabled=!1,e("Медиапланы загружены")},this.model.loadTimer)})}catch(e){console.log("Ошибка загрузки медиапланов:",e.message);return}this.model.setIsMediaplansDataLoaded(!0),this.view.addAssistantMsgToChat("Данные по медиапланам загружены"),this.model.addMsgData("Данные по медиапланам загружены"),this.fileListRenderPrep(this.view.mediaplansList),m.forEach(e=>{const s=this.view.createMediaPlansListElem(e.title,e.isLoading,e.isLoaded);this.model.addDataToMediaplansList(e),this.view.mediaplansList.append(s);const i=s.querySelector(".media-plans-company__download");i==null||i.addEventListener("click",()=>{console.log("загружаем медиаплан компании ^_^")})}),this.view.createMediaplansOrReportsCap(!this.model.isReportsDataLoaded,this.view.reportsList,"Вы можете загрузить отчеты нажав на кнопку в чате"),console.log("текущее состояние:",this.model)}async handleReportsListRender(){if(this.model.isReportsDataLoaded){alert("Данные по отчетам уже были загружены!");return}this.view.getReportsBtn.disabled=!0,this.view.addAssistantMsgToChat("Выполняется Ваш запрос данных по отчетам"),this.model.addMsgData("Выполняется Ваш запрос данных по отчетам");try{await new Promise(e=>{setTimeout(()=>{this.view.getReportsBtn.disabled=!1,e("Отчеты загружены")},this.model.loadTimer)})}catch(e){console.log("Ошибка загрузки отчетов:",e.message);return}this.model.setIsReportsDataLoaded(!0),this.view.addAssistantMsgToChat("Данные по отчетам загружены"),this.model.addMsgData("Данные по отчетам загружены"),this.fileListRenderPrep(this.view.reportsList),g.forEach(e=>{const s=this.view.createReportsListElem(e.title,e.isLoading,e.isLoaded);this.model.addDataToReportsList(e),this.view.reportsList.append(s);const i=s.querySelector(".elem-company__download");i==null||i.addEventListener("click",()=>{console.log("загружаем отчет компании ^_^")})}),this.view.createMediaplansOrReportsCap(!this.model.isMediaplansDataLoaded,this.view.mediaplansList,"Вы можете загрузить медиапланы нажав на кнопку в чате"),console.log("текущее состояние:",this.model)}}const u=new p,_=new h,v=new L(u,_);console.log("контроллер приложения:",v);
